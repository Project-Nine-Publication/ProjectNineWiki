<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>龟瓦琉璃院</title>

    <style>
        :root{
            --bg: #fafafa;
            --panel: #ffffff;
            --text: #1f2328;
            --muted: #6b7280;
            --border: #e5e7eb;
            --link: #2f5bd6;
            --codebg: #f6f8fa;
            --shadow: 0 1px 2px rgba(0,0,0,.06);
            --radius: 12px;
        }

        /* Theme via data attribute (manual toggle) */
        :root[data-theme="dark"]{
            --bg:#0b0f14; --panel:#0f1620; --text:#e6edf3; --muted:#9aa4b2;
            --border:#223044; --link:#7aa2ff; --codebg:#0b111a;
            --shadow: 0 1px 2px rgba(0,0,0,.35);
        }

        /* Default (only when user hasn't chosen a theme) */
        @media (prefers-color-scheme: dark){
            :root:not([data-theme]){
                --bg:#0b0f14; --panel:#0f1620; --text:#e6edf3; --muted:#9aa4b2;
                --border:#223044; --link:#7aa2ff; --codebg:#0b111a;
                --shadow: 0 1px 2px rgba(0,0,0,.35);
            }
        }

        html,body{ height:100%; }
        body{
            margin:0;
            font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif;
            line-height:1.65;
            background:var(--bg);
            color:var(--text);
        }

        a{ color:var(--link); text-decoration:none; }
        a:hover{ text-decoration:underline; }

        .container{
            max-width: 1050px;
            margin: 0 auto;
            padding: 0 16px;
        }

        header.site-header{
            position: sticky;
            top: 0;
            z-index: 1000;
            background: color-mix(in srgb, var(--panel) 92%, transparent);
            border-bottom: 1px solid var(--border);
            backdrop-filter: blur(8px);
        }
        header.site-header .bar{
            display:flex;
            align-items:center;
            gap:16px;
            padding: 12px 0;
        }
        header.site-header .logo{
            font-weight: 800;
            letter-spacing: .2px;
            color: var(--text);
            display:flex;
            align-items:center;
            gap:10px;
        }
        header.site-header .logo small{
            font-weight: 600;
            color: var(--muted);
        }
        header.site-header .spacer{ flex:1; }
        header.site-header .back-link a{
            display:inline-flex;
            align-items:center;
            gap:8px;
            font-weight: 600;
            color: var(--muted);
            padding: 8px 10px;
            border:1px solid var(--border);
            border-radius: 999px;
            background: var(--panel);
            box-shadow: var(--shadow);
        }
        header.site-header .back-link a:hover{ color: var(--text); text-decoration:none; }

        /* Theme toggle button (styled like back link) */
        .theme-toggle{
            display:inline-flex;
            align-items:center;
            gap:8px;
            font-weight: 600;
            color: var(--muted);
            padding: 8px 10px;
            border:1px solid var(--border);
            border-radius: 999px;
            background: var(--panel);
            box-shadow: var(--shadow);
            cursor:pointer;
            user-select:none;
        }
        .theme-toggle:hover{ color: var(--text); }
        .theme-toggle:focus-visible{
            outline: 2px solid color-mix(in srgb, var(--link) 60%, transparent);
            outline-offset: 2px;
        }

        main{ padding: 20px 0 40px; }
        article{
            background: var(--panel);
            border: 1px solid var(--border);
            border-radius: var(--radius);
            box-shadow: var(--shadow);
            padding: 22px;
            margin-top: 1em;
        }

        h1,h2,h3{ line-height:1.25; }
        h1{
            margin: 0 0 14px;
            padding-bottom: 10px;
            border-bottom: 1px solid var(--border);
        }
        h2{ margin-top: 1.6em; }
        p{ margin: .75em 0; }

        pre, code{
            font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace;
        }
        pre{
            background: var(--codebg);
            border: 1px solid var(--border);
            border-radius: 10px;
            padding: 12px 14px;
            overflow-x:auto;
        }
        code{
            background: color-mix(in srgb, var(--codebg) 75%, transparent);
            border: 1px solid color-mix(in srgb, var(--border) 70%, transparent);
            border-radius: 8px;
            padding: .1em .35em;
        }
        pre code{ background: transparent; border: none; padding:0; }

        img{
            max-width: 100%;
            height: auto;
            border-radius: 10px;
        }

        table.metadata, article table{
            border-collapse: collapse;
            width: 100%;
            margin: 0 0 14px;
        }
        table.metadata th, table.metadata td,
        article table th, article table td{
            border: 1px solid var(--border);
            padding: 8px 10px;
            vertical-align: top;
        }
        table.metadata th, article table th{
            background: color-mix(in srgb, var(--panel) 85%, var(--border));
            text-align:left;
            width: 34%;
        }
        table.metadata img, article table img{
            max-width: 100%;
            height: auto;
        }

        @media (min-width: 900px){
            table.metadata{
                float:right;
                width: 320px;
                margin: 0 0 14px 18px;
            }
        }

        .tags{
            margin-top: 18px;
            padding-top: 14px;
            border-top: 1px dashed var(--border);
            display:flex;
            flex-wrap: wrap;
            gap: 8px;
            align-items: center;
        }
        .tags .label{
            color: var(--muted);
            font-weight: 700;
            margin-right: 6px;
        }
        .tag{
            display:inline-flex;
            align-items:center;
            padding: 6px 10px;
            border-radius: 999px;
            border: 1px solid var(--border);
            background: color-mix(in srgb, var(--panel) 90%, var(--border));
            color: var(--text);
            font-weight: 600;
            font-size: .92rem;
            text-decoration:none;
            white-space: nowrap;
        }

        footer.site-footer{
            color: var(--muted);
            margin-top: 16px;
            font-size: .95rem;
        }
        footer.site-footer hr{
            border: none;
            border-top: 1px solid var(--border);
            margin: 18px 0 12px;
        }
    </style>

    <script>
        (function () {
            const STORAGE_KEY = "theme"; // "light" | "dark" | null
            const root = document.documentElement;

            function setTheme(theme) {
                if (theme === "light" || theme === "dark") {
                    root.setAttribute("data-theme", theme);
                    localStorage.setItem(STORAGE_KEY, theme);
                } else {
                    root.removeAttribute("data-theme"); // fall back to prefers-color-scheme
                    localStorage.removeItem(STORAGE_KEY);
                }
                updateToggleLabel();
            }

            function getStoredTheme() {
                try { return localStorage.getItem(STORAGE_KEY); } catch { return null; }
            }

            function getEffectiveTheme() {
                const explicit = root.getAttribute("data-theme");
                if (explicit) return explicit;
                return window.matchMedia && window.matchMedia("(prefers-color-scheme: dark)").matches
                    ? "dark"
                    : "light";
            }

            function updateToggleLabel() {
                const btn = document.getElementById("themeToggle");
                if (!btn) return;
                const effective = getEffectiveTheme();
                btn.setAttribute("aria-pressed", effective === "dark" ? "true" : "false");
                btn.textContent = effective === "dark" ? "🌙 Dark" : "☀️ Light";
                btn.title = "Toggle color theme";
            }

            // Init: apply stored theme if any
            const stored = getStoredTheme();
            if (stored === "light" || stored === "dark") root.setAttribute("data-theme", stored);

            // Keep label accurate if user has no explicit theme and OS theme changes
            if (window.matchMedia) {
                const mq = window.matchMedia("(prefers-color-scheme: dark)");
                const handler = () => {
                    if (!root.hasAttribute("data-theme")) updateToggleLabel();
                };
                if (mq.addEventListener) mq.addEventListener("change", handler);
                else if (mq.addListener) mq.addListener(handler);
            }

            window.__theme = { setTheme, updateToggleLabel };

            if (document.readyState === "loading") {
                document.addEventListener("DOMContentLoaded", updateToggleLabel);
            } else {
                updateToggleLabel();
            }
        })();
    </script>
</head>

<body>
    <header class="site-header">
        <div class="container">
            <div class="bar">
                <a href="https://in.projectnine.world/Onlinepydia" class="logo">
                    Onlinepydia <small>Project Nine</small>
                </a>
                <div class="spacer"></div>

                <button id="themeToggle" class="theme-toggle" type="button"
                    aria-label="Toggle color theme" aria-pressed="false">
                    ☀️ Light
                </button>

                <nav class="back-link">
                    <a href="javascript:history.back()">⟵ Back</a>
                </nav>
            </div>
        </div>
    </header>

    <main class="container">
        <article>
            <p>Codename: 冷宅（龟瓦琉璃院）
又名：龟瓦琉璃院
（地点）坐落在西城某条大街上。根据原先的impression，；建筑风格：日式、仿中、自制。龟瓦龟壳状7边形金色琉璃半透明上半部，亭廊弓形弧线剖面。通过这种曲线实现一种婉转的美感。</p>
<!--
* 参考：红楼梦贾府入口（Visual not available）、？？？？（新白娘子传奇？）、Fate Zero、真田丸、夏日战争、恭王府
* 注意到龟瓦琉璃院是一个建筑群，冷家只是其中一个部分，代表性的建筑是冷宅。这个地方人多口杂，大小朋友也很多，该很热闹寻常。尤其是。。。等小孩子、以及一些妇女、男人。
* 相比高瓦白墙，外面圈壁可以是有那个什么（空间镂空的）。
* 坐西北、朝东南？
* 院落正对（街对面）是另一片坊市，包括一个角楼住户，本来是打算让Jerry的，但是这个可以有行政功能、也可以给张家用，把塔楼做大一些、就可以有土楼的效果、更多人可以居住。
-->
<h2 id="description">Description</h2>
<p>（人物）人口最多时：冷先胜、冷雪映、冷沐、白斩、张鹤、张姨、张叔、抄书童、过夜访客。</p>
<p>Serves both the residential and political purpose for Mr. Leng and his family and servants.</p>
<h2 id="design">Design</h2>
<!--Design questions:

1. （question）冷宅本身是一个大建筑（类似夏日战争）还是多个单独简直（类似原先的vision、例如雪映和冷先胜占各自的独立的屋子而不仅仅是房间）？张家看来是不必跟冷家完全住在一起、但是住多远？冷先胜到底为啥要把张鹤留在身边、既然都已经交换了，我觉得交换的动机还不够明确，考察人们为什么交换子女、寻找典故。另外张鹤成年后（虽然那会儿已经不在了）跟冷先胜长相的相似着实让人们猜疑。关于雪映母亲的猜测？
    * 张姨对雪映特别的好，该会寻常给她点小东西，不一定“值钱”，例如食物🍲、捡来的新鲜好玩的事物，那种。
2. Why 围墙？ That wastes material. And why 侧墙 at all for all rooms since that region is 无雨区。Only washrooms and maybe kitchens need full walls. The rest can take the style from traditional home paintings (I.e. open style without at least 2 side walls)。萧衎看到肯定可以好好评论一下。这种设计会多很多自由性，跟邻里周围的联系也可以更强一些。但是我们还得workout过度区域如何处理。-->
<ol>
<li>（设计指导）选择好位置之后看一下那个地方的地形、以及已有的建筑部落，还因地制宜，这样不至于造出来的完全是平的、方的，例如院落包围或许在西南角处开始是半包围而不是直角。搜索看看有没有Toronto Geology/Historical Geology/Geography，尤其是等高线、关于植物分布的内容。</li>
<li>（Component）几个可用的建筑的Vision（注意style融合、尤其是日化）：1）（冷先胜用）类似于Fate Zero里面那个父亲的院子、主要是三边包围然后面前有个院子、院子跟三边有围墙跟外面隔断，2）（旧梦）正中间一个、三边3个紧密型房屋、或许可以作储蓄用。3）（龟瓦琉璃）长廊、靠假山、或许有小池塘装饰用，至于龟瓦琉璃院原先的vision可能太简单、参考恭王府和苏州园林但是注意不要那么繁复显得不够简洁和大方。</li>
<li>（component）祖庙：张显灵。。一排排骨灰存放。
<ul>
<li>（历史）何曾真正存在过？全是些“history”制作<!--(Remark, #20220522) In the past to make up the historical issue we said NFC's history is all made up by the Mr. Leng's government, so I might be wondering in that case when are those deceased people existed? However, that is no longer a problem since NFC's history is REAL now on Tellus.-->。不过二十/四十来年历史？另外故事的世界原地(时间原点？)或许可以设置为1995年，这样可以勉强赶上1999的保密协议（名称参见百科）——no one remember anything, but there is clear evidence what has changed suddenly in a single day, things out of place, not remember how they get there.... This is called 99综合症/适应群（待医学名称）。最可信的解释/hypothesis就是1999保密协议，内容为。。。（萧衎自己的回忆？）。故事实体（萧衎进城）的发生时间则仍然是whatever当前时间，即发布时间。一个做法是可以跟当前时代紧密结合，但是其实是异世界。小说更新也是跟实际时间progression有关（话说国内可以现在起点和天涯上发一下）——<!--(#20220522) I have already copied this part of the story in Saudade, next time I review this I can just re-consolidate it without worrying about how we should keep it in the novel draft.-->第一章萧衎离开北京的时间差不多是、乘坐的航班是。。。（最好有个姓萧的人），然后那会儿最新的新闻是某欧洲国家要退出欧盟造成。。。以及美国最新总统又要掀起跟中国的贸易战各种明细。。。注意萧衎没什么积蓄、要出来跟家里还闹了点矛盾（妈妈说“你不老老实实在岗位上呆着。。。我反正。。。“）、最后还是老爸多给了1/5/10W块钱让他好歹”要是想家了/玩够了好歹有钱买个回程机票“，好在堂妹送了一张/两张单程机票过去、萧衎卖了其中一张、找了个机友。到了九层楼之后里面其实比较flexible，没有加拿大工签也可以打工，不收现金（也不可以提现，只有CP）、也不交税、政府根本管不到，带来的钱则存在里面Bank of Canada（虚构）/China了。飞机上认识的那个大兄弟没降落时就去跳机了（一个专门安排的program、高度和位置等待我们research——全世界最高、最长时间、最惊险的跳伞？！或许穿上一件风翼/不穿——那个大兄弟肯定是什么设备都没穿的了、无伞跳机？琢磨一下如何可以实现安全接待。这个项目或许是免费的，大兄弟还劝萧衎一起来的。）（这其实是西天极乐世界的一个项目：戴上一个无氧/半呼吸面罩，以及一个紧身保暖防风外衣，然后裸跳，下落至大概一半的高度会有飞行器及时的从下往上射出一个抄斗，花里胡哨的、也有红色的、最底下星状材料旁边一圈透明的观窗，16边形角落有16个小降落伞、下落到一定高度后会硬撑开底部面积呈现放射状——考察方向控制——然后会有牵引机拽着其余4个方向上多出来的牵引线送到指定西天极乐世界降落地点——是另外一个活动项目的开始的地方、先有接待饮食保暖问候等一系列消疲活动。萧衎后来去到西天极乐世界的时候看到有人玩这个才知道原来是这么回事。）、后来就再也没见到（因为楼内没有联系方式）——萧衎或许跟他要联系方式了。在楼内的时候有一次经过那片城区想到去找他一次，没有找到人，倒是开门的是一个很漂亮的女孩子（年龄？）。</li>
</ul>
</li>
</ol>
<!--（写作指导）文字里面不可能直接用“中式、日式”这种high level、几乎无意义的词汇的，表现出建筑本身参考了什么样式、即便是通过观察者，也务必是在于mention具体的建筑元素上、而不是这种大的分类上。这些分类原本ambiguous，显得很不专业。这也包括词汇例如”哥特式雕刻“（直接提到繁复程度、位置、雕刻内容）、”现代化简约“（不过这个词或许没有substitute——通过学习architecture critic我们或许可以identify这种建筑的特点然后就可以在此准确描述）、”传统“——这些词在独白中必须不使用，但是在对话中可以用到。
-->

            <div class="tags"><span class="label">Tags:</span><span class="tag">#Legend</span><span class="tag">Architecture</span><span class="tag">Building</span><span class="tag">NFC</span><span class="tag">Special</span><span class="tag">Tellus</span><span class="tag">Tellus World</span></div>
        </article>

        
    </main>

    <script>
        // Hook up the button after it exists in the DOM
        (function () {
            const btn = document.getElementById("themeToggle");
            if (!btn) return;

            btn.addEventListener("click", () => {
                const root = document.documentElement;
                const current = root.getAttribute("data-theme"); // null | "light" | "dark"
                const next = (current || (window.matchMedia("(prefers-color-scheme: dark)").matches ? "dark" : "light")) === "dark"
                    ? "light"
                    : "dark";
                window.__theme.setTheme(next);
            });

            window.__theme.updateToggleLabel();
        })();
    </script>
</body>
</html>